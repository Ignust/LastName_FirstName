#include <iostream>
#include <windows.h>

#include "GameField.hpp"


//------------------------------------------------------------------------------------------
GameField::GameField()
    : mField_()
//------------------------------------------------------------------------------------------
{
    initField();
}

//------------------------------------------------------------------------------------------
GameField::~GameField()
//------------------------------------------------------------------------------------------
{

}

//------------------------------------------------------------------------------------------
void GameField::showField()
//------------------------------------------------------------------------------------------
{
    system("cls");
    for (auto y = 0; y < GAME_FIELD_Y_SIZE; ++y) {
        for (auto x = 0; x < GAME_FIELD_X_SIZE; ++x) {
            std::cout << mField_[y][x];
        }
        std::cout << std::endl;
    }
    //system("pause");
}

//------------------------------------------------------------------------------------------
void GameField::setChar(const uint8_t x, const uint8_t y, const uint8_t c)
//------------------------------------------------------------------------------------------
{
    mField_[y][x] = c;
}

//------------------------------------------------------------------------------------------
void GameField::setChar(const COORDINATES coord,const uint8_t c)
//------------------------------------------------------------------------------------------
{
    mField_[coord.second][coord.first] = c;
}

//------------------------------------------------------------------------------------------
uint8_t GameField::getChar(const uint8_t x, const uint8_t y)
//------------------------------------------------------------------------------------------
{
    return mField_[y][x];
}

//------------------------------------------------------------------------------------------
uint8_t GameField::getChar(const COORDINATES coord)
//------------------------------------------------------------------------------------------
{
    return mField_[coord.second][coord.first];
}

//------------------------------------------------------------------------------------------
void GameField::printScore()
//------------------------------------------------------------------------------------------
{

}

//------------------------------------------------------------------------------------------
void GameField::resetField()
//------------------------------------------------------------------------------------------
{

}

//------------------------------------------------------------------------------------------
void GameField::initField()
//------------------------------------------------------------------------------------------
{
    initFieldSize();
    printRectangleBoudary(GAME_FIELD_X_START, GAME_FIELD_Y_START,
                          GAME_FIELD_X_FINISH, GAME_FIELD_Y_FINISH);

}

//------------------------------------------------------------------------------------------
void GameField::initFieldSize()
//------------------------------------------------------------------------------------------
{
    mField_.resize(GAME_FIELD_Y_SIZE);
    for (auto i = 0; i < GAME_FIELD_Y_SIZE; ++i) {
        mField_[i].resize(GAME_FIELD_X_SIZE, OBJECT_EMPTY);
    }
}

//------------------------------------------------------------------------------------------
void GameField::printRectangleBoudary(const uint8_t x1, const uint8_t y1, const uint8_t x2, const uint8_t y2)
//------------------------------------------------------------------------------------------
{
    printLine(x1 - 1, y1 - 1, x2 -1 , y1 - 1);
    printLine(x1 - 1, y2 - 1, x2 - 1 , y2 - 1);
    printLine(x1 - 1, y1 - 1, x1 - 1, y2 - 1);
    printLine(x2 - 1, y1 - 1, x2 - 1, y2 - 1);
}

//------------------------------------------------------------------------------------------
void GameField::printLine(const uint8_t x1, const uint8_t y1, const uint8_t x2, const uint8_t  y2)
//------------------------------------------------------------------------------------------
{
    if (x1 == x2) {
            for (auto i = y1; i <= y2; ++i) {
                setChar(x1, i, BOUNDARY_SYMBOL);
            }
        }
        else if (y1 == y2) {
            for (auto i = x1; i <= x2; ++i) {
                setChar(i, y1, BOUNDARY_SYMBOL);
            }
        }
}




